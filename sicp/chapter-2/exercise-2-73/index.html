<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.1.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/img/favicon/box-archive-180x180.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/img/favicon/box-archive-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/img/favicon/box-archive-16x16.png">
  <link rel="mask-icon" href="/img/favicon/box-archive-solid.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.0.0/css/all.min.css" integrity="sha256-jTIdiMuX/e3DGJUGwl3pKSxuc6YOuqtJYkM0bGQESA4=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"studyingeugene.github.io","root":"/","images":"/images","scheme":"Mist","darkmode":false,"version":"8.10.1","exturl":false,"sidebar":{"position":"right","display":"remove","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeInUp","post_header":false,"post_body":false,"coll_header":false,"sidebar":false}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":true,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="데이터 중심 설계 방식으로 미분 프로시저 설계하기">
<meta property="og:type" content="article">
<meta property="og:title" content="SICP 연습문제 2.73 친절한 풀이">
<meta property="og:url" content="https://studyingeugene.github.io/sicp/chapter-2/exercise-2-73/index.html">
<meta property="og:site_name" content="이태화 연구기록 아카이브">
<meta property="og:description" content="데이터 중심 설계 방식으로 미분 프로시저 설계하기">
<meta property="og:locale" content="ko_KR">
<meta property="article:published_time" content="2022-03-26T07:00:00.000Z">
<meta property="article:modified_time" content="2022-03-26T07:00:00.000Z">
<meta property="article:author" content="이태화">
<meta property="article:tag" content="SICP">
<meta property="article:tag" content="컴퓨터 프로그램의 구조와 해석">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://studyingeugene.github.io/sicp/chapter-2/exercise-2-73/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"ko","comments":true,"permalink":"https://studyingeugene.github.io/sicp/chapter-2/exercise-2-73/","path":"sicp/chapter-2/exercise-2-73/","title":"SICP 연습문제 2.73 친절한 풀이"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>SICP 연습문제 2.73 친절한 풀이 | 이태화 연구기록 아카이브</title>
  




<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://fonts.googleapis.com/earlyaccess/jejugothic.css">
<meta name="google-site-verification" content="GG6y04HlVXwD3NSSnQ_aDh3Y-i2vH1iYX9GMTb6ybw8" />
<meta name="google-site-verification" content="L2Ro4ExoGrwHQ6er6FuyGHWxUdHoDQ87D1H3QpQrjz4" />
  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <p class="site-title">이태화 연구기록 아카이브</p>
    </a>
      <p class="site-subtitle" itemprop="description">Plus Ultra</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>홈</a></li>
        <li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>프로필</a></li>
        <li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-bars fa-fw"></i>카테고리</a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>전체글 보기</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>검색
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="ko">
    <link itemprop="mainEntityOfPage" href="https://studyingeugene.github.io/sicp/chapter-2/exercise-2-73/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://avatars.githubusercontent.com/u/102410772?v=1">
      <meta itemprop="name" content="이태화">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="이태화 연구기록 아카이브">
      <meta itemprop="description" content="공부한 지식을 정리 및 보관하기 위한 개인 아카이브입니다. 오타나 틀린 내용이 있다면 댓글로 지적해 주시면 감사하겠습니다. 바랍니다.">
    </span>
    
    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="SICP 연습문제 2.73 친절한 풀이 | 이태화 연구기록 아카이브">
      <meta itemprop="description" content="데이터 중심 설계 방식으로 미분 프로시저 설계하기">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          SICP 연습문제 2.73 친절한 풀이
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>

      <time title="Post created: 2022-03-26 16:00:00" itemprop="dateCreated datePublished" datetime="2022-03-26T16:00:00+09:00">2022-03-26</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/sicp/" itemprop="url" rel="index"><span itemprop="name">컴퓨터 프로그램의 구조와 해석</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/sicp/chapter-2/" itemprop="url" rel="index"><span itemprop="name">2장 연습문제 풀이</span></a>
        </span>
    </span>

  
</div>

            <div class="post-description">데이터 중심 설계 방식으로 미분 프로시저 설계하기</div>
        </div>
      </header>

    
    
    
	<div class="post-body post-body-not-index" itemprop="articleBody">
        <h2 id="문제"><a class="markdownIt-Anchor" href="#문제"></a> 문제</h2>
<p>2.3.2절에서는 글자로 이루어진 식을 다음 프로그램으로 미분하였다.</p>
<figure class="highlight scheme"><table><tr><td class="code"><pre><span class="line">(<span class="name"><span class="built_in">define</span></span> (<span class="name">deriv</span> exp var)   </span><br><span class="line">  (<span class="name"><span class="built_in">cond</span></span> ((<span class="name"><span class="built_in">number?</span></span> exp) <span class="number">0</span>) </span><br><span class="line">        ((<span class="name">variable?</span> exp)</span><br><span class="line">         (<span class="name"><span class="built_in">if</span></span> (<span class="name">same-variable?</span> exp var) <span class="number">1</span> <span class="number">0</span>)) </span><br><span class="line">        ((<span class="name">sum?</span> exp)</span><br><span class="line">         (<span class="name">make-sum</span> (<span class="name">deriv</span> (<span class="name">addend</span> exp) var)   </span><br><span class="line">                   (<span class="name">deriv</span> (<span class="name">augend</span> exp) var))) </span><br><span class="line">        ((<span class="name">product?</span> exp)</span><br><span class="line">         (<span class="name">make-sum</span></span><br><span class="line">          (<span class="name">make-product</span> (<span class="name">multiplier</span> exp)</span><br><span class="line">                        (<span class="name">deriv</span> (<span class="name">multiplicand</span> exp) var))</span><br><span class="line">          (<span class="name">make-product</span> (<span class="name">deriv</span> (<span class="name">multiplier</span> exp) var)</span><br><span class="line">                        (<span class="name">multiplicand</span> exp)))) </span><br><span class="line">        &lt;추가된 규칙들은 여기에&gt;</span><br><span class="line">        (<span class="name"><span class="built_in">else</span></span> <span class="string">&quot;unknown expression type&quot;</span>)))</span><br></pre></td></tr></table></figure>
<p>이 또한 식이 어떤 타입이냐에 따라 할 일을 나누어 맡기는 프로그램이라 볼 수 있다. 이 경우에는 (+ 같은) 대수식의 연산 기호가 데이터의 '타입 흐름표’가 되고, deriv는 그 데이터를 적용할 연산이 된다. 이 프로그램을 데이터 중심 방식으로 바꾸려면 위 미분 프로시저를 다음과 같이 고쳐 쓰면 된다.</p>
<figure class="highlight scheme"><table><tr><td class="code"><pre><span class="line">(<span class="name"><span class="built_in">define</span></span> (<span class="name">deriv</span> exp var)</span><br><span class="line">   (<span class="name"><span class="built_in">cond</span></span> ((<span class="name"><span class="built_in">number?</span></span> exp) <span class="number">0</span>)</span><br><span class="line">         ((<span class="name">variable?</span> exp) (<span class="name"><span class="built_in">if</span></span> (<span class="name">same-variable?</span> exp var) <span class="number">1</span> <span class="number">0</span>))</span><br><span class="line">         (<span class="name"><span class="built_in">else</span></span> ((<span class="name">get</span> <span class="symbol">&#x27;deriv</span> (<span class="name">operator</span> exp)) (<span class="name">operands</span> exp)</span><br><span class="line">                                            var))))</span><br><span class="line">(<span class="name"><span class="built_in">define</span></span> (<span class="name">operator</span> exp) (<span class="name"><span class="built_in">car</span></span> exp))</span><br><span class="line"></span><br><span class="line">(<span class="name"><span class="built_in">define</span></span> (<span class="name">operands</span> exp) (<span class="name"><span class="built_in">cdr</span></span> exp))</span><br></pre></td></tr></table></figure>
<p>a. 위에서 한 일이 무엇인지 설명해 보라. number?나 variable?같은 술어 프로시저를 모조리 데이터 중심 방식으로 다루지 못하는 이유는 무엇인가?</p>
<p>b. 덧셈과 곱셈식을 미분하는 프로시저를 짜라. 그런 다음, 그 프로시저들을 위 프로그램에서 쓰는 표에 집어넣는데 필요한 코드를 짜라.</p>
<p>c. (<a href="/sicp/chapter-2/exercise-2-56/">연습문제 2.56</a>에서 나온 것처럼) 지수 식을 미분하는 것과 같이, 새로 보태고 싶은 규칙을 하나 골라 여기서 만든 데이터 중심 시스템에 집어넣어라.</p>
<p>d. 이런 단순한 대수 처리 방식에서는, 식에 붙은 연산자가 그 식의 타입을 나타낸다. 이때 '연산자와 타입’이 아니라 '타입과 연산자’로 프로시저 인덱스가 붙어 있다면, deriv 속에 알맞은 프로시저를 꺼내 쓰는 코드 <sup>dispatching</sup> <sup>code</sup> 가 다음과 같이 바뀐다.</p>
<figure class="highlight scheme"><table><tr><td class="code"><pre><span class="line">((<span class="name">get</span> (<span class="name">operator</span> exp) <span class="symbol">&#x27;deriv</span>) (<span class="name">operands</span> exp) var)</span><br></pre></td></tr></table></figure>
<p>이 경우, 미분 시스템에는 어떤 변화가 필요한가?</p>
<blockquote>
<h2 id="문제로-부터-얻은-것"><a class="markdownIt-Anchor" href="#문제로-부터-얻은-것"></a> 문제로 부터 얻은 것</h2>
<p>데이터 중심 프로그래밍 기법으로 프로시저를 짜면 확실히 몇가지 이점을 얻을 수 있다는 것을 알게 되었습니다.</p>
<ol>
<li>패키지 내부의 프로시저를 숨길 수 있었습니다.</li>
<li>새로운 연산을 추가하기가 기존보다 훨씬 편했습니다. (additivity)</li>
</ol>
</blockquote>
<h2 id="문제풀이"><a class="markdownIt-Anchor" href="#문제풀이"></a> 문제풀이</h2>
<p>dr.racket에는 <code>put</code>과 <code>get</code>이 빌트인되어있지 않습니다. 아래의 코드를 사용하면 <code>put</code>과 <code>get</code>을 사용할 수 있습니다.</p>
<figure class="highlight scheme"><table><tr><td class="code"><pre><span class="line">(<span class="name"><span class="built_in">define</span></span> global-array &#x27;())</span><br><span class="line"></span><br><span class="line">(<span class="name"><span class="built_in">define</span></span> (<span class="name">make-entry</span> k v) (<span class="name"><span class="built_in">list</span></span> k v))</span><br><span class="line">(<span class="name"><span class="built_in">define</span></span> (<span class="name">key</span> entry) (<span class="name"><span class="built_in">car</span></span> entry))</span><br><span class="line">(<span class="name"><span class="built_in">define</span></span> (<span class="name">value</span> entry) (<span class="name"><span class="built_in">cadr</span></span> entry))</span><br><span class="line"></span><br><span class="line">(<span class="name"><span class="built_in">define</span></span> (<span class="name">put</span> op type item)</span><br><span class="line">  (<span class="name"><span class="built_in">define</span></span> (<span class="name">put-helper</span> k array)</span><br><span class="line">    (<span class="name"><span class="built_in">cond</span></span> ((<span class="name"><span class="built_in">null?</span></span> array) (<span class="name"><span class="built_in">list</span></span>(<span class="name">make-entry</span> k item)))</span><br><span class="line">          ((<span class="name"><span class="built_in">equal?</span></span> (<span class="name">key</span> (<span class="name"><span class="built_in">car</span></span> array)) k) array)</span><br><span class="line">          (<span class="name"><span class="built_in">else</span></span> (<span class="name"><span class="built_in">cons</span></span> (<span class="name"><span class="built_in">car</span></span> array) (<span class="name">put-helper</span> k (<span class="name"><span class="built_in">cdr</span></span> array))))))</span><br><span class="line">  (<span class="name"><span class="built_in">set!</span></span> global-array (<span class="name">put-helper</span> (<span class="name"><span class="built_in">list</span></span> op type) global-array)))</span><br><span class="line"></span><br><span class="line">(<span class="name"><span class="built_in">define</span></span> (<span class="name">get</span> op type)</span><br><span class="line">  (<span class="name"><span class="built_in">define</span></span> (<span class="name">get-helper</span> k array)</span><br><span class="line">    (<span class="name"><span class="built_in">cond</span></span> ((<span class="name"><span class="built_in">null?</span></span> array) <span class="literal">#f</span>)</span><br><span class="line">          ((<span class="name"><span class="built_in">equal?</span></span> (<span class="name">key</span> (<span class="name"><span class="built_in">car</span></span> array)) k) (<span class="name">value</span> (<span class="name"><span class="built_in">car</span></span> array)))</span><br><span class="line">          (<span class="name"><span class="built_in">else</span></span> (<span class="name">get-helper</span> k (<span class="name"><span class="built_in">cdr</span></span> array)))))</span><br><span class="line">  (<span class="name">get-helper</span> (<span class="name"><span class="built_in">list</span></span> op type) global-array))</span><br></pre></td></tr></table></figure>
<p>그리고 교재의 2.3.2절의 프로시저 중, 이번 문제에 필요한 프로시저는 다음과 같습니다.</p>
<figure class="highlight scheme"><table><tr><td class="code"><pre><span class="line">(<span class="name"><span class="built_in">define</span></span> (<span class="name">variable?</span> x)</span><br><span class="line">  (<span class="name"><span class="built_in">symbol?</span></span> x))</span><br><span class="line"></span><br><span class="line">(<span class="name"><span class="built_in">define</span></span> (<span class="name">same-variable?</span> x y)</span><br><span class="line">  (<span class="name"><span class="built_in">eq?</span></span> x y))</span><br><span class="line"></span><br><span class="line">(<span class="name"><span class="built_in">define</span></span> (<span class="name">=number?</span> exp num)</span><br><span class="line">  (<span class="name"><span class="built_in">and</span></span> (<span class="name"><span class="built_in">number?</span></span> exp) (<span class="name"><span class="built_in">=</span></span> exp num)))</span><br><span class="line"></span><br><span class="line">(<span class="name"><span class="built_in">define</span></span> (<span class="name">make-sum</span> x y)</span><br><span class="line">  (<span class="name"><span class="built_in">cond</span></span> ((<span class="name">=number?</span> x <span class="number">0</span>) y)</span><br><span class="line">        ((<span class="name">=number?</span> y <span class="number">0</span>) x)</span><br><span class="line">        ((<span class="name"><span class="built_in">and</span></span> (<span class="name"><span class="built_in">number?</span></span> x) (<span class="name"><span class="built_in">number?</span></span> y)) (<span class="name"><span class="built_in">+</span></span> x y))</span><br><span class="line">        (<span class="name"><span class="built_in">else</span></span> (<span class="name"><span class="built_in">list</span></span> <span class="symbol">&#x27;+</span> x y))))</span><br><span class="line"></span><br><span class="line">(<span class="name"><span class="built_in">define</span></span> (<span class="name">make-product</span> x y)</span><br><span class="line">  (<span class="name"><span class="built_in">cond</span></span> ((<span class="name"><span class="built_in">or</span></span> (<span class="name">=number?</span> x <span class="number">0</span>) (<span class="name">=number?</span> y <span class="number">0</span>)) <span class="number">0</span>)</span><br><span class="line">        ((<span class="name">=number?</span> x <span class="number">1</span>) y)</span><br><span class="line">        ((<span class="name">=number?</span> y <span class="number">1</span>) x)</span><br><span class="line">        ((<span class="name"><span class="built_in">and</span></span> (<span class="name"><span class="built_in">number?</span></span> x) (<span class="name"><span class="built_in">number?</span></span> y)) (<span class="name"><span class="built_in">*</span></span> x y))</span><br><span class="line">        (<span class="name"><span class="built_in">else</span></span> (<span class="name"><span class="built_in">list</span></span> <span class="symbol">&#x27;*</span> x y))))</span><br></pre></td></tr></table></figure>
<h3 id="a-프로시저의-원리"><a class="markdownIt-Anchor" href="#a-프로시저의-원리"></a> a. 프로시저의 원리</h3>
<p>책의 2.4.3절에서는 데이터 중심 프로그래밍에 대해 설명하고 있습니다. 제가 이해한 데이터 중심 프로그래밍 기법은 데이터의 종류에 따라 가장 알맞은 연산을 적용하기 위한 프로그래밍 기법입니다. 위의 <code>deriv</code>는 <a href="/sicp/chapter-2/exercise-2-56/">연습문제 2.56</a>에서 처음 만들었던 것 처럼, 수식에서 변수와 연산자를 뽑아내어 각각에 맞게 미분을 하는 프로시저입니다. 미분하는 대상이 변수인지 상수인지에따라 또, 연산자가 곱셈인지 덧셈인지에 따라 즉, 데이터의 타입에 따라 다른 방식으로 미분을 진행하므로, 데이터 중심 설계를 하기에 알맞다고 할 수 있습니다.</p>
<p>number?나 variable?같은 술어 프로시저를 모조리 데이터 중심 방식으로 다루지 못하는 이유는, 술어 프로시저가 적용될 가능성이 있는 모든 데이터를 연산표에 기록하는 것은 현실적으로 불가능하기 때문이라고 생각합니다.</p>
<h3 id="b-덧셈과-곱셈식을-미분하는-프로시저"><a class="markdownIt-Anchor" href="#b-덧셈과-곱셈식을-미분하는-프로시저"></a> b. 덧셈과 곱셈식을 미분하는 프로시저</h3>
<p>원본 프로시저에 있던 +와 *을 데이터 중심 프로그래밍 방식으로 나타내면 됩니다. 미분 프로시저를 제대로 기억하고 있지 않거나, 교재의 put과 get의 용도를 이해하지 못했다면, 어렵게 느껴질 수도 있습니다. 여유를 가지고 페이지를 앞으로 넘겨서 제대로 복습하고 오시길 바랍니다.</p>
<p>기존에 만들어둔 미분 프로시저의 핵심이 되는 미분 연산을 변형하면 아래와 같습니다.</p>
<figure class="highlight scheme"><table><tr><td class="code"><pre><span class="line">(<span class="name"><span class="built_in">define</span></span> (<span class="name">derive-sum</span> operands var)</span><br><span class="line">  (<span class="name">make-sum</span> (<span class="name">deriv</span> (<span class="name">addend</span> operands) var)</span><br><span class="line">            (<span class="name">deriv</span> (<span class="name">augend</span> operands) var)))</span><br><span class="line"></span><br><span class="line">(<span class="name"><span class="built_in">define</span></span> (<span class="name">deriv-product</span> operands var)</span><br><span class="line">  (<span class="name">make-sum</span></span><br><span class="line">   (<span class="name">make-product</span> (<span class="name">multiplier</span> operands)</span><br><span class="line">                 (<span class="name">deriv</span> (<span class="name">multiplicand</span> operands) var))</span><br><span class="line">   (<span class="name">make-product</span> (<span class="name">deriv</span> (<span class="name">multiplier</span> operands) var)</span><br><span class="line">                 (<span class="name">multiplicand</span> operands))))</span><br></pre></td></tr></table></figure>
<p>각 연산을 교재의 2.4.3절처럼 패키지 형태로 만들어 보겠습니다.</p>
<figure class="highlight scheme"><table><tr><td class="code"><pre><span class="line">(<span class="name"><span class="built_in">define</span></span> (<span class="name">install-sum-deriv</span>)</span><br><span class="line">  (<span class="name"><span class="built_in">define</span></span> (<span class="name">addend</span> operands)</span><br><span class="line">    (<span class="name"><span class="built_in">car</span></span> operands))</span><br><span class="line">  (<span class="name"><span class="built_in">define</span></span> (<span class="name">augend</span> operands)</span><br><span class="line">    (<span class="name"><span class="built_in">cadr</span></span> operands))</span><br><span class="line">  (<span class="name"><span class="built_in">define</span></span> (<span class="name">deriv-sum</span> operands var)</span><br><span class="line">    (<span class="name">make-sum</span> (<span class="name">deriv</span> (<span class="name">addend</span> operands) var)</span><br><span class="line">              (<span class="name">deriv</span> (<span class="name">augend</span> operands) var)))</span><br><span class="line">  </span><br><span class="line">  (<span class="name">put</span> <span class="symbol">&#x27;deriv</span> <span class="symbol">&#x27;+</span> deriv-sum))</span><br><span class="line"></span><br><span class="line">(<span class="name"><span class="built_in">define</span></span> (<span class="name">install-product-deriv</span>)</span><br><span class="line">  (<span class="name"><span class="built_in">define</span></span> (<span class="name">multiplier</span> operands)</span><br><span class="line">    (<span class="name"><span class="built_in">car</span></span> operands))</span><br><span class="line">  (<span class="name"><span class="built_in">define</span></span> (<span class="name">multiplicand</span> operands)</span><br><span class="line">    (<span class="name"><span class="built_in">cadr</span></span> operands))</span><br><span class="line">  (<span class="name"><span class="built_in">define</span></span> (<span class="name">deriv-product</span> operands var)</span><br><span class="line">    (<span class="name">make-sum</span></span><br><span class="line">     (<span class="name">make-product</span> (<span class="name">multiplier</span> operands)</span><br><span class="line">                   (<span class="name">deriv</span> (<span class="name">multiplicand</span> operands) var))</span><br><span class="line">     (<span class="name">make-product</span> (<span class="name">deriv</span> (<span class="name">multiplier</span> operands) var)</span><br><span class="line">                   (<span class="name">multiplicand</span> operands))))</span><br><span class="line"></span><br><span class="line">  (<span class="name">put</span> <span class="symbol">&#x27;deriv</span> <span class="symbol">&#x27;*</span> deriv-product))</span><br></pre></td></tr></table></figure>
<h3 id="c-지수식-미분"><a class="markdownIt-Anchor" href="#c-지수식-미분"></a> c. 지수식 미분</h3>
<p>(<a href="/sicp/chapter-2/exercise-2-56/">연습문제 2.56</a>의 exponentiation을 그대로 따왔습니다.</p>
<figure class="highlight scheme"><table><tr><td class="code"><pre><span class="line">(<span class="name"><span class="built_in">define</span></span> (<span class="name">fast-exp</span> b n)</span><br><span class="line">  (<span class="name"><span class="built_in">cond</span></span> ((<span class="name"><span class="built_in">=</span></span> n <span class="number">0</span>) <span class="number">1</span>)</span><br><span class="line">        ((<span class="name"><span class="built_in">even?</span></span> n) (<span class="name">square</span> (<span class="name">fast-exp</span> b (<span class="name"><span class="built_in">/</span></span> n <span class="number">2</span>))))</span><br><span class="line">        (<span class="name"><span class="built_in">else</span></span> (<span class="name"><span class="built_in">*</span></span> b (<span class="name">fast-exp</span> b (<span class="name"><span class="built_in">-</span></span> n <span class="number">1</span>))))))</span><br><span class="line">    </span><br><span class="line">(<span class="name"><span class="built_in">define</span></span> (<span class="name">make-exponentiation</span> base power)</span><br><span class="line">  (<span class="name"><span class="built_in">cond</span></span> ((<span class="name">=number?</span> base <span class="number">0</span>) <span class="number">0</span>)</span><br><span class="line">        ((<span class="name">=number?</span> base <span class="number">1</span>) <span class="number">1</span>)</span><br><span class="line">        ((<span class="name">=number?</span> power <span class="number">0</span>) <span class="number">1</span>)</span><br><span class="line">        ((<span class="name">=number?</span> power <span class="number">1</span>) base)</span><br><span class="line">        ((<span class="name"><span class="built_in">and</span></span> (<span class="name"><span class="built_in">number?</span></span> base) (<span class="name"><span class="built_in">number?</span></span> power)) (<span class="name">fast-exp</span> base power))</span><br><span class="line">        (<span class="name"><span class="built_in">else</span></span> (<span class="name"><span class="built_in">list</span></span> <span class="symbol">&#x27;^</span> base power))))</span><br><span class="line">    </span><br><span class="line">(<span class="name"><span class="built_in">define</span></span> (<span class="name">install-exponentiation-deriv</span>)</span><br><span class="line">  (<span class="name"><span class="built_in">define</span></span> (<span class="name">base</span> operands)</span><br><span class="line">    (<span class="name"><span class="built_in">car</span></span> operands))</span><br><span class="line">  (<span class="name"><span class="built_in">define</span></span> (<span class="name">power</span> operands)</span><br><span class="line">    (<span class="name"><span class="built_in">cadr</span></span> operands))</span><br><span class="line">  (<span class="name"><span class="built_in">define</span></span> (<span class="name">deriv-exponentiation</span> operands var)</span><br><span class="line">    (<span class="name">make-product</span></span><br><span class="line">     (<span class="name">deriv</span> (<span class="name">base</span> operands) var)</span><br><span class="line">     (<span class="name">make-product</span> (<span class="name">power</span> operands)</span><br><span class="line">                   (<span class="name">make-exponentiation</span> (<span class="name">base</span> operands)</span><br><span class="line">                                        (<span class="name">make-sum</span> (<span class="name">power</span> operands) <span class="number">-1</span>)))))</span><br><span class="line">  (<span class="name">put</span> <span class="symbol">&#x27;deriv</span> <span class="symbol">&#x27;^</span> deriv-exponentiation))</span><br></pre></td></tr></table></figure>
<h3 id="d-연산자와-데이터-타입-순서-변경"><a class="markdownIt-Anchor" href="#d-연산자와-데이터-타입-순서-변경"></a> d. 연산자와 데이터 타입 순서 변경</h3>
<p>문제에서 요구한대로 <code>deriv</code>를 바꾸면 다음과 같습니다.</p>
<figure class="highlight scheme"><table><tr><td class="code"><pre><span class="line">(<span class="name"><span class="built_in">define</span></span> (<span class="name">deriv</span> exp var)</span><br><span class="line">   (<span class="name"><span class="built_in">cond</span></span> ((<span class="name"><span class="built_in">number?</span></span> exp) <span class="number">0</span>)</span><br><span class="line">         ((<span class="name">variable?</span> exp) (<span class="name"><span class="built_in">if</span></span> (<span class="name">same-variable?</span> exp var) <span class="number">1</span> <span class="number">0</span>))</span><br><span class="line">         (<span class="name"><span class="built_in">else</span></span> ((<span class="name">get</span> (<span class="name">operator</span> exp) <span class="symbol">&#x27;deriv</span>) (<span class="name">operands</span> exp)</span><br><span class="line">                                            var))))</span><br></pre></td></tr></table></figure>
<p>단순히 모든 put을 쓰는 프로시저들의 순서만 바꿔주면 그만입니다.</p>
<figure class="highlight scheme"><table><tr><td class="code"><pre><span class="line">(<span class="name">put</span> <span class="symbol">&#x27;+</span> <span class="symbol">&#x27;deriv</span> deriv-sum)</span><br><span class="line"></span><br><span class="line">(<span class="name">put</span> <span class="symbol">&#x27;*</span> <span class="symbol">&#x27;deriv</span> deriv-product)</span><br><span class="line"></span><br><span class="line">(<span class="name">put</span> <span class="symbol">&#x27;^</span> <span class="symbol">&#x27;deriv</span> deriv-exponentiation)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>읽어주셔서 감사합니다.</p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/sicp/" rel="tag"># SICP</a>
              <a href="/tags/sicp/" rel="tag"># 컴퓨터 프로그램의 구조와 해석</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/sicp/chapter-2/exercise-2-72/" rel="prev" title="SICP 연습문제 2.72 친절한 풀이">
                  <i class="fa fa-chevron-left"></i> SICP 연습문제 2.72 친절한 풀이
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/sicp/review/chapter-1-review/" rel="next" title="SICP 1장 복습 체크리스트">
                  SICP 1장 복습 체크리스트 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    <div class="comments utterances-container"></div>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">이태화</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/mist/" rel="noopener" target="_blank">NexT.Mist</a>
  </div><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5752314429808077"
     crossorigin="anonymous"></script>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/lozad@1.16.0/dist/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  
<script src="https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.4.0/dist/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>



  <script src="/js/third-party/fancybox.js"></script>


  




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css" integrity="sha256-94CNZ/bJtwrBYZrXhCOBvpB4rZUzBnvAsirFv31TMGo=" crossorigin="anonymous">


<script class="next-config" data-name="utterances" type="application/json">{"enable":true,"repo":"studyingeugene/studyingeugene.github.io","issue_term":"title","theme":"github-light"}</script>
<script src="/js/third-party/comments/utterances.js"></script>

</body>
</html>
