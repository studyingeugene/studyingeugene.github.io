<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.1.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/img/favicon/box-archive-180x180.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/img/favicon/box-archive-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/img/favicon/box-archive-16x16.png">
  <link rel="mask-icon" href="/img/favicon/box-archive-solid.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.0.0/css/all.min.css" integrity="sha256-jTIdiMuX/e3DGJUGwl3pKSxuc6YOuqtJYkM0bGQESA4=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"studyingeugene.github.io","root":"/","images":"/images","scheme":"Pisces","darkmode":false,"version":"8.10.1","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeInUp","post_header":false,"post_body":false,"coll_header":false,"sidebar":false}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":true,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="여덟-퀸 문제 filter와 flatmap을 이용해서 해결하기">
<meta property="og:type" content="article">
<meta property="og:title" content="SICP 연습문제 2.42 친절한 풀이">
<meta property="og:url" content="https://studyingeugene.github.io/sicp/chapter-2/exercise-2-42/index.html">
<meta property="og:site_name" content="이태화 아카이브">
<meta property="og:description" content="여덟-퀸 문제 filter와 flatmap을 이용해서 해결하기">
<meta property="og:locale" content="ko_KR">
<meta property="og:image" content="https://studyingeugene.github.io/img/sicp/chapter-2/eight-queen.gif">
<meta property="og:image" content="https://studyingeugene.github.io/img/sicp/chapter-2/exercise-2-42-1.png">
<meta property="og:image" content="https://studyingeugene.github.io/img/sicp/chapter-2/exercise-2-42-2.png">
<meta property="article:published_time" content="2022-03-04T13:00:00.000Z">
<meta property="article:modified_time" content="2022-03-04T13:00:00.000Z">
<meta property="article:author" content="이태화">
<meta property="article:tag" content="SICP">
<meta property="article:tag" content="컴퓨터 프로그램의 구조와 해석">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://studyingeugene.github.io/img/sicp/chapter-2/eight-queen.gif">


<link rel="canonical" href="https://studyingeugene.github.io/sicp/chapter-2/exercise-2-42/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"ko","comments":true,"permalink":"https://studyingeugene.github.io/sicp/chapter-2/exercise-2-42/","path":"sicp/chapter-2/exercise-2-42/","title":"SICP 연습문제 2.42 친절한 풀이"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>SICP 연습문제 2.42 친절한 풀이 | 이태화 아카이브</title>
  




<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://fonts.googleapis.com/earlyaccess/jejugothic.css">
<meta name="google-site-verification" content="GG6y04HlVXwD3NSSnQ_aDh3Y-i2vH1iYX9GMTb6ybw8" />
<meta name="google-site-verification" content="L2Ro4ExoGrwHQ6er6FuyGHWxUdHoDQ87D1H3QpQrjz4" />
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5752314429808077"
     crossorigin="anonymous"></script>
  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <p class="site-title">이태화 아카이브</p>
    </a>
      <p class="site-subtitle" itemprop="description">Plus Ultra</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>홈</a></li>
        <li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>프로필</a></li>
        <li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-bars fa-fw"></i>카테고리</a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>전체글 보기</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>검색
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          목차
        </li>
        <li class="sidebar-nav-overview">
          소개
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%EB%AC%B8%EC%A0%9C"><span class="nav-text"> 문제</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%EB%AC%B8%EC%A0%9C%EB%A1%9C-%EB%B6%80%ED%84%B0-%EC%96%BB%EC%9D%80-%EA%B2%83"><span class="nav-text"> 문제로 부터 얻은 것</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%EB%AC%B8%EC%A0%9C-%ED%92%80%EC%9D%B4%EC%97%90-%ED%95%84%EC%9A%94%ED%95%9C-%ED%94%84%EB%A1%9C%EC%8B%9C%EC%A0%80%EB%93%A4"><span class="nav-text"> 문제 풀이에 필요한 프로시저들</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%EB%AC%B8%EC%A0%9C%ED%92%80%EC%9D%B4"><span class="nav-text"> 문제풀이</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-adjoin-position"><span class="nav-text"> 1. adjoin-position</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-empty-board"><span class="nav-text"> 2. empty-board</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#31-safe"><span class="nav-text"> 3.1 safe?</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#32-safe"><span class="nav-text"> 3.2. safe?</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="이태화"
      src="https://avatars.githubusercontent.com/u/102410772?v=1">
  <p class="site-author-name" itemprop="name">이태화</p>
  <div class="site-description" itemprop="description">공부한 지식을 정리 및 보관하기 위한 개인 아카이브입니다. 오타나 틀린 내용이 있다면 댓글로 지적해 주시면 감사하겠습니다.</div>
</div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="ko">
    <link itemprop="mainEntityOfPage" href="https://studyingeugene.github.io/sicp/chapter-2/exercise-2-42/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://avatars.githubusercontent.com/u/102410772?v=1">
      <meta itemprop="name" content="이태화">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="이태화 아카이브">
      <meta itemprop="description" content="공부한 지식을 정리 및 보관하기 위한 개인 아카이브입니다. 오타나 틀린 내용이 있다면 댓글로 지적해 주시면 감사하겠습니다.">
    </span>
    
    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="SICP 연습문제 2.42 친절한 풀이 | 이태화 아카이브">
      <meta itemprop="description" content="여덟-퀸 문제 filter와 flatmap을 이용해서 해결하기">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          SICP 연습문제 2.42 친절한 풀이
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>

      <time title="Post created: 2022-03-04 22:00:00" itemprop="dateCreated datePublished" datetime="2022-03-04T22:00:00+09:00">2022-03-04</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/sicp/" itemprop="url" rel="index"><span itemprop="name">컴퓨터 프로그램의 구조와 해석</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/sicp/chapter-2/" itemprop="url" rel="index"><span itemprop="name">2장 연습문제 풀이</span></a>
        </span>
    </span>

  
</div>

            <div class="post-description">여덟-퀸 문제 filter와 flatmap을 이용해서 해결하기</div>
        </div>
      </header>

    
    
    
	<div class="post-body post-body-not-index" itemprop="articleBody">
        <h2 id="문제"><a class="markdownIt-Anchor" href="#문제"></a> 문제</h2>
<p>'에잇-퀸 퍼즐<sup>eight-queens puzzle</sup>’은, 체스판에 퀸 여덟을 놓되 서로 공격할 수 있는 자리에 오지 못하게 두는 방법이 무엇인지 찾아내는 수수께끼다. (다시 말해서, 두 퀸이 마주보지 않도록 한 가로줄, 세로줄, 대각선 위에 퀸 두 개가 오면 안된다.) 이 수수께끼를 푸는 한 가지 방법은, 그림 2.8에서 보여주듯이 체스판을 가로지르면서 세로줄마다 하나씩 퀸을 놓는 것이다. 따라서 퀸 k-1개를 제대로 두었다고 치면, k번째 퀸은 다른 퀸을 공격하지 못하는 자리에 와야 한다.</p>
<p><img data-src="/img/sicp/chapter-2/eight-queen.gif" alt="그림 2.8 에잇-퀸 퍼즐을 푸는 한 가지 방법" /></p>
<p>이런 방식을 되돌이<sup>재귀</sup>로 정리해 보면 이러하다. 퀸 k-1개를 세로줄 k-1개에 두는 방법을 모두 찾아냈다고 치자. 그렇게 찾아낸 방법 하나하나에 대하여 k번째 세로줄의 가로줄마다 k번째 퀸을 놓는다고 치고, 그 자리 값을 보탠다. 이로부터 k번째 세로줄에 있는 퀸이 공격 받지 않는 자리 값만 골라낸다. 이리하면 k개 세로줄에 퀸 k개를 안전하게 놓을 수 있는 방법을 몽땅 얻을 수 있다. 이런 과정을 계속 밟아 가면, 답 하나가 아니라 이 수수께끼를 푸는 모든 답을 얻어낼 수 있다.</p>
<p>이 풀이법을 queens 프로시저로 실현해 보자. queens는 퀸 n개를 n×n 체스판에 놓는다고 할 때, 얻을 수 있는 모든 답을 차례열로 묶어 낸다. queens에 갇힌 프로시저 queen-cols는 세로줄 k개에 퀸을 놓을 수 있는 모든 방법을 차례열로 묶어낸다.</p>
<figure class="highlight scheme"><table><tr><td class="code"><pre><span class="line">(<span class="name"><span class="built_in">define</span></span> (<span class="name">queens</span> board-size)</span><br><span class="line">  (<span class="name"><span class="built_in">define</span></span> (<span class="name">queen-cols</span> k)</span><br><span class="line">    (<span class="name"><span class="built_in">if</span></span> (<span class="name"><span class="built_in">=</span></span> k <span class="number">0</span>)</span><br><span class="line">        (<span class="name"><span class="built_in">list</span></span> empty-board)</span><br><span class="line">        (<span class="name">filter</span></span><br><span class="line">         (<span class="name"><span class="built_in">lambda</span></span> (positions) (<span class="name">safe?</span> k positions))</span><br><span class="line">         (<span class="name">flatmap</span></span><br><span class="line">          (<span class="name"><span class="built_in">lambda</span></span> (rest-of-queens)</span><br><span class="line">            (<span class="name"><span class="built_in">map</span></span> (<span class="name"><span class="built_in">lambda</span></span> (new-row)</span><br><span class="line">                   (<span class="name">adjoin-position</span> new-row k rest-of-queens))</span><br><span class="line">                 (<span class="name">enumerate-interval</span> <span class="number">1</span> board-size)))</span><br><span class="line">          (<span class="name">queen-cols</span> (<span class="name"><span class="built_in">-</span></span> k <span class="number">1</span>))))))</span><br><span class="line">  (<span class="name">queen-cols</span> board-size))</span><br></pre></td></tr></table></figure>
<p>이 프로시저에서 rest-of-queens는 세로줄 k-1개에 퀸 k-1개를 놓는 방법 하나를 나태내고, new-row는 k번째 세로줄에 k번째 퀸을 놓을 수 있는 가로줄을 나타낸다. 이 프로그램을 마무리 짓기 위하여, 체스판의 자리 값을 원소로 하는 집합의 표현 방식을 정하라. 그 다음, 그 집합에 새로운 가로-세로 자리 값을 집어 넣는 프로시저 adjoin-position, 또 공집합을 나타내는 프로시저 empty-board를 구현하라. 이에 아울러, k번째 퀸이 나머지 다른 퀸에서 안전한지 알아볼 수도 있도록 safe?라는 술어 프로시저도 만들어라. (이때 나머지 퀸들은 벌써 안전한 자리를 잡고 있다 치고, 새로 놓을 퀸이 안전한지만 따져보면 된다.)</p>
<blockquote>
<h2 id="문제로-부터-얻은-것"><a class="markdownIt-Anchor" href="#문제로-부터-얻은-것"></a> 문제로 부터 얻은 것</h2>
<p>프로시저의 위치를 보고 이 프로시저가 어떤 반환값을 반환해야 하는지 추론하는 능력이 상승했습니다.<br />
차례열을 처리하는 car, cadr, cdr 프로시저에 조금 더 익숙해질 수 있었습니다.<br />
append에 nil을 첫번째 원소로 넣었을 때 어떤 일이 일어나는 지를 알 수 있었습니다.</p>
</blockquote>
<h2 id="문제-풀이에-필요한-프로시저들"><a class="markdownIt-Anchor" href="#문제-풀이에-필요한-프로시저들"></a> 문제 풀이에 필요한 프로시저들</h2>
<figure class="highlight scheme"><table><tr><td class="code"><pre><span class="line">(<span class="name"><span class="built_in">define</span></span> (<span class="name">enumerate-interval</span> low high)</span><br><span class="line">  (<span class="name"><span class="built_in">if</span></span> (<span class="name"><span class="built_in">&gt;</span></span> low high)</span><br><span class="line">      nil</span><br><span class="line">      (<span class="name"><span class="built_in">cons</span></span> low (<span class="name">enumerate-interval</span> (<span class="name"><span class="built_in">+</span></span> low <span class="number">1</span>) high))))</span><br><span class="line"></span><br><span class="line">(<span class="name"><span class="built_in">define</span></span> (<span class="name">accumulate</span> op initial sequence)</span><br><span class="line">  (<span class="name"><span class="built_in">if</span></span> (<span class="name"><span class="built_in">null?</span></span> sequence)</span><br><span class="line">      initial</span><br><span class="line">      (<span class="name">op</span> (<span class="name"><span class="built_in">car</span></span> sequence)</span><br><span class="line">          (<span class="name">accumulate</span> op initial (<span class="name"><span class="built_in">cdr</span></span> sequence)))))</span><br><span class="line"></span><br><span class="line">(<span class="name"><span class="built_in">define</span></span> (<span class="name">flatmap</span> proc seq)</span><br><span class="line">  (<span class="name">accumulate</span> append nil (<span class="name"><span class="built_in">map</span></span> proc seq)))</span><br><span class="line">  </span><br><span class="line">(<span class="name"><span class="built_in">define</span></span> (<span class="name">filter</span> predicate seq)</span><br><span class="line">  (<span class="name"><span class="built_in">cond</span></span> ((<span class="name"><span class="built_in">null?</span></span> seq) nil)</span><br><span class="line">        ((<span class="name">predicate</span> (<span class="name"><span class="built_in">car</span></span> seq))</span><br><span class="line">         (<span class="name"><span class="built_in">cons</span></span> (<span class="name"><span class="built_in">car</span></span> seq)</span><br><span class="line">               (<span class="name">filter</span> predicate (<span class="name"><span class="built_in">cdr</span></span> seq))))</span><br><span class="line">        (<span class="name"><span class="built_in">else</span></span> (<span class="name">filter</span> predicate (<span class="name"><span class="built_in">cdr</span></span> seq)))))</span><br></pre></td></tr></table></figure>
<h2 id="문제풀이"><a class="markdownIt-Anchor" href="#문제풀이"></a> 문제풀이</h2>
<p>저는 이 문제를 푸는데 상당히 애를 먹었습니다. 첫번째로 애를 먹은 부분은, 완성된 결과가 어떤 모양인지 문제에서 정확히 제시해주지 않은 점입니다. 완성된 queens 프로시저의 결과값 중 하나는 이렇게 생겼습니다.</p>
<figure class="highlight scheme"><table><tr><td class="code"><pre><span class="line">((<span class="name">2</span> <span class="number">1</span>) (<span class="name">4</span> <span class="number">2</span>) (<span class="name">6</span> <span class="number">3</span>) (<span class="name">1</span> <span class="number">4</span>) (<span class="name">3</span> <span class="number">5</span>) (<span class="name">5</span> <span class="number">6</span>))</span><br></pre></td></tr></table></figure>
<p><br/><br/></p>
<p>queens 프로시저는 모든 가능한 퀸의 위치를 flatmap을 이용해서 만들어낸 후, 그 중에서 조건에 맞는 위치들의 차례열을 필터링하는 프로시저입니다.</p>
<h3 id="1-adjoin-position"><a class="markdownIt-Anchor" href="#1-adjoin-position"></a> 1. adjoin-position</h3>
<p>adjoin-position 프로시저를 구현하기 위해서는 이 프로시저가 어떤 값을 인자로 받고 어떤 값을 반환해야 하는 지를 확인해야 합니다. 이 프로시저의 위치로 보았을때, 인자로 받는 값은 1부터 n사이의 정수값입니다. 그리고 그 정수값을 이용해서 반환해야 하는 값은, 기존의 퀸의 위치를 나타낸 차례열에 (정수값 new-row, 열 k) 쌍을 이어붙인 값입니다. 프로시저로 구현하면 아래와 같습니다.</p>
<figure class="highlight scheme"><table><tr><td class="code"><pre><span class="line">(<span class="name"><span class="built_in">define</span></span> (<span class="name">adjoin-position</span> new-row k rest-of-queens)</span><br><span class="line">  (<span class="name"><span class="built_in">append</span></span> rest-of-queens (<span class="name"><span class="built_in">list</span></span> (<span class="name"><span class="built_in">list</span></span> new-row k))))</span><br></pre></td></tr></table></figure>
<p><br/><br/></p>
<p>처음에 저는 (list (list new-row k)) 대신에 (list new-row k)를 넣었습니다. 이는 append의 기능을 착각해서 생긴 문제입니다. 우리가 원하는 기능은 다음과 같습니다. “((1 1) (2 2)) 쌍에 (3 3)을 넣어서 ((1 1) (2 2) (3 3))을 만드는 것” 하지만 리스트를 두번 사용하지 않으면 다음과 같은 과정을 진행해버립니다. “((1 1) (2 2)) 쌍에 (3 3)을 넣어서 ((1 1) (2 2) 3 3)을 만드는 것” append는 리스트의 원소들을 빼내서 다시 넣어주는 프로시저이기 때문에 쌍을 넣고 싶다면 list를 두번 사용해야 합니다.</p>
<h3 id="2-empty-board"><a class="markdownIt-Anchor" href="#2-empty-board"></a> 2. empty-board</h3>
<p>empty-board가 어떻게 쓰이는지를 살펴보겠습니다. empty-board가 반환해야 하는 값은, (queen-cols 0)을 의미해야 합니다. (queen-cols 0)은 프로시저 안의 flatmap에서 쓰이는데, 기존의 퀸의 위치를 나타내는 차례열에 새로운 퀸의 위치쌍을 append하는 형태로 쓰입니다. 즉, 아래의 식을 만족해야 하는 것입니다.</p>
<figure class="highlight scheme"><table><tr><td class="code"><pre><span class="line">(<span class="name"><span class="built_in">append</span></span> (<span class="name">queen-cols</span> <span class="number">0</span>) (<span class="name"><span class="built_in">list</span></span> <span class="number">1</span> <span class="number">1</span>))</span><br><span class="line">&gt;&gt;&gt; (<span class="name"><span class="built_in">list</span></span> <span class="number">1</span> <span class="number">1</span>) </span><br></pre></td></tr></table></figure>
<p><br/><br/></p>
<p>appned 프로시저는 (append nil something)을 something으로 반환해 줍니다. 따라서 프로시저는 아래와 같습니다.</p>
<figure class="highlight scheme"><table><tr><td class="code"><pre><span class="line">(<span class="name"><span class="built_in">define</span></span> empty-board nil)</span><br></pre></td></tr></table></figure>
<h3 id="31-safe"><a class="markdownIt-Anchor" href="#31-safe"></a> 3.1 safe?</h3>
<p>가장 생각도 많이 필요하고 시간도 오래 걸린 프로시저입니다. 처음으로 완성한 프로시저는 다음과 같습니다.</p>
<figure class="highlight scheme"><table><tr><td class="code"><pre><span class="line">(<span class="name"><span class="built_in">define</span></span> (<span class="name">safe?</span> k positions)</span><br><span class="line">  (<span class="name"><span class="built_in">define</span></span> (<span class="name">horizontal-check-iter</span> value positions)</span><br><span class="line">    (<span class="name"><span class="built_in">if</span></span> (<span class="name"><span class="built_in">null?</span></span> positions)</span><br><span class="line">        <span class="literal">#f</span></span><br><span class="line">        (<span class="name"><span class="built_in">or</span></span> (<span class="name"><span class="built_in">=</span></span> (<span class="name"><span class="built_in">car</span></span> (<span class="name"><span class="built_in">car</span></span> positions)) value)</span><br><span class="line">            (<span class="name">horizontal-check-iter</span> value (<span class="name"><span class="built_in">cdr</span></span> positions)))))</span><br><span class="line">  </span><br><span class="line">  (<span class="name"><span class="built_in">define</span></span> (<span class="name">diagnol-check-iter</span> value distance positions)</span><br><span class="line">    (<span class="name"><span class="built_in">if</span></span> (<span class="name"><span class="built_in">null?</span></span> positions)</span><br><span class="line">        <span class="literal">#f</span></span><br><span class="line">        (<span class="name"><span class="built_in">or</span></span> (<span class="name"><span class="built_in">=</span></span> (<span class="name"><span class="built_in">car</span></span> (<span class="name"><span class="built_in">car</span></span> positions)) (<span class="name"><span class="built_in">+</span></span> value distance))</span><br><span class="line">            (<span class="name"><span class="built_in">=</span></span> (<span class="name"><span class="built_in">car</span></span> (<span class="name"><span class="built_in">car</span></span> positions)) (<span class="name"><span class="built_in">-</span></span> value distance))</span><br><span class="line">            (<span class="name">diagnol-check-iter</span> value (<span class="name"><span class="built_in">+</span></span> distance <span class="number">1</span>) (<span class="name"><span class="built_in">cdr</span></span> positions)))))</span><br><span class="line">  </span><br><span class="line">  (<span class="name"><span class="built_in">define</span></span> (<span class="name">check?</span> k positions)</span><br><span class="line">    (<span class="name"><span class="built_in">let</span></span> ((<span class="name">row-value</span> (<span class="name"><span class="built_in">car</span></span> (<span class="name"><span class="built_in">car</span></span> positions))))</span><br><span class="line">      (<span class="name"><span class="built_in">if</span></span> (<span class="name"><span class="built_in">=</span></span> k <span class="number">1</span>)</span><br><span class="line">          <span class="literal">#f</span></span><br><span class="line">          (<span class="name"><span class="built_in">or</span></span> (<span class="name">horizontal-check-iter</span> row-value (<span class="name"><span class="built_in">cdr</span></span> positions))</span><br><span class="line">              (<span class="name">diagnol-check-iter</span> row-value <span class="number">1</span> (<span class="name"><span class="built_in">cdr</span></span> positions))</span><br><span class="line">              (<span class="name">check?</span> (<span class="name"><span class="built_in">-</span></span> k <span class="number">1</span>) (<span class="name"><span class="built_in">cdr</span></span> positions))))))</span><br><span class="line"></span><br><span class="line">  (<span class="name"><span class="built_in">if</span></span> (<span class="name">check?</span> k positions)</span><br><span class="line">      <span class="literal">#f</span></span><br><span class="line">      <span class="literal">#t</span>))</span><br></pre></td></tr></table></figure>
<p>첫번째로 떠올린 아이디어입니다. 가장 첫번째 퀸의 row값을 기준으로 horizontal-check-iter로 수평 방향으로 겹치는 퀸이 있는지 확인하고, diagnol-check-iter로 대각선 방향으로 겹치는 퀸이 있는지 확인한 후 다음 퀸으로 넘어가서 다시 확인하는 프로시저입니다.</p>
<p><img data-src="/img/sicp/chapter-2/exercise-2-42-1.png" alt="조금 조잡해 보이지만 결과를 도출해내는 프로시저" /></p>
<p><br/><br/></p>
<h3 id="32-safe"><a class="markdownIt-Anchor" href="#32-safe"></a> 3.2. safe?</h3>
<p>두번째로 떠올린 아이디어는 두 포지션간 서로 공격이 가능한지 알아보는 (check? p1 p2)를 만들어서 구현하는 것입니다.</p>
<figure class="highlight scheme"><table><tr><td class="code"><pre><span class="line">(<span class="name"><span class="built_in">define</span></span> (<span class="name">safe?</span> k positions)</span><br><span class="line">  (<span class="name"><span class="built_in">define</span></span> (<span class="name">check?</span> p1 p2)</span><br><span class="line">    (<span class="name"><span class="built_in">let</span></span> ((<span class="name">row-1</span> (<span class="name"><span class="built_in">car</span></span> p1))</span><br><span class="line">          (<span class="name">col-1</span> (<span class="name"><span class="built_in">cadr</span></span> p1))</span><br><span class="line">          (<span class="name">row-2</span> (<span class="name"><span class="built_in">car</span></span> p2))</span><br><span class="line">          (<span class="name">col-2</span> (<span class="name"><span class="built_in">cadr</span></span> p2)))</span><br><span class="line">      (<span class="name"><span class="built_in">or</span></span> (<span class="name"><span class="built_in">=</span></span> row-1 row-2)</span><br><span class="line">          (<span class="name"><span class="built_in">=</span></span> (<span class="name"><span class="built_in">-</span></span> col-2 col-1) (<span class="name"><span class="built_in">abs</span></span> (<span class="name"><span class="built_in">-</span></span> row-2 row-1))))))</span><br><span class="line"></span><br><span class="line">  (<span class="name"><span class="built_in">define</span></span> (<span class="name">check-positions-iter</span> this-position other-positions)</span><br><span class="line">      (<span class="name"><span class="built_in">if</span></span> (<span class="name"><span class="built_in">null?</span></span> other-positions)</span><br><span class="line">          <span class="literal">#f</span></span><br><span class="line">          (<span class="name"><span class="built_in">or</span></span> (<span class="name">check?</span> this-position (<span class="name"><span class="built_in">car</span></span> other-positions))</span><br><span class="line">              (<span class="name">check-positions-iter</span> this-position (<span class="name"><span class="built_in">cdr</span></span> other-positions)))))</span><br><span class="line">  </span><br><span class="line">  (<span class="name"><span class="built_in">define</span></span> (<span class="name">check-iter</span> k positions)</span><br><span class="line">    (<span class="name"><span class="built_in">if</span></span> (<span class="name"><span class="built_in">=</span></span> k <span class="number">1</span>)</span><br><span class="line">        <span class="literal">#f</span></span><br><span class="line">        (<span class="name"><span class="built_in">or</span></span> (<span class="name">check-positions-iter</span> (<span class="name"><span class="built_in">car</span></span> positions) (<span class="name"><span class="built_in">cdr</span></span> positions))</span><br><span class="line">            (<span class="name">check-iter</span> (<span class="name"><span class="built_in">-</span></span> k <span class="number">1</span>) (<span class="name"><span class="built_in">cdr</span></span> positions)))))</span><br><span class="line">  </span><br><span class="line">  (<span class="name"><span class="built_in">if</span></span> (<span class="name">check-iter</span> k positions)</span><br><span class="line">      <span class="literal">#f</span>   <span class="comment">;unsafe</span></span><br><span class="line">      <span class="literal">#t</span>)) <span class="comment">;safe</span></span><br></pre></td></tr></table></figure>
<br/>
<p><img data-src="/img/sicp/chapter-2/exercise-2-42-2.png" alt="조금 조잡해 보이지만 결과를 도출해내는 프로시저 2" /></p>
<p><br/><br/></p>
<p>읽어주셔서 감사합니다.</p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/sicp/" rel="tag"># SICP</a>
              <a href="/tags/sicp/" rel="tag"># 컴퓨터 프로그램의 구조와 해석</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/sicp/chapter-2/exercise-2-41/" rel="prev" title="SICP 연습문제 2.41 친절한 풀이">
                  <i class="fa fa-chevron-left"></i> SICP 연습문제 2.41 친절한 풀이
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/sicp/chapter-2/exercise-2-43/" rel="next" title="SICP 연습문제 2.43 친절한 풀이">
                  SICP 연습문제 2.43 친절한 풀이 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    <div class="comments utterances-container"></div>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">이태화</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/pisces/" rel="noopener" target="_blank">NexT.Pisces</a>
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/lozad@1.16.0/dist/lozad.min.js" integrity="sha256-mOFREFhqmHeQbXpK2lp4nA3qooVgACfh88fpJftLBbc=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  
<script src="https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.4.0/dist/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>



  <script src="/js/third-party/fancybox.js"></script>


  




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css" integrity="sha256-94CNZ/bJtwrBYZrXhCOBvpB4rZUzBnvAsirFv31TMGo=" crossorigin="anonymous">


<script class="next-config" data-name="utterances" type="application/json">{"enable":true,"repo":"studyingeugene/studyingeugene.github.io","issue_term":"title","theme":"github-light"}</script>
<script src="/js/third-party/comments/utterances.js"></script>

</body>
</html>
